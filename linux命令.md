# 服务器性能监控

## 测试目的

发现服务器的性能瓶颈，配置的不同能够承载的最大任务数不同，能够承载的压力也不同

## 测试范围和性能指标

+ CPU
+ 内存
+ 磁盘
+ 网络
+ 版本

## 进程与线程

进程：能独立运行的，可以拥有多个线程，会分配一个地址空间，进程之间不共享内存地址空间，一个进程下的多个线程可以共享父进程的地址空间

线程：是进程的一个实体，在进程中运行，是进程工作的最小单位，一个线程只能属于一个进程

## Linux命令

man：可以查看所有命令的使用方法

top：实时监控系统运行状态

​         参数：-h：帮助

​                     -p：监控指定的进程，多个进程时用逗号隔开

​                     M：按内存使用率排序

​                     P：按cpu使用率排序

​                      z：彩色/黑白显示

 top中load average：系统的运行队列的平均利用率，也可认为是可运行进程的平均数。三个值分别表示在最后的1分钟、5分钟、15分钟的平均负载值。在单核CPU中 load average值为1时，表示满负荷状态，多核CPU中满负载的loadaverage的值为1*cpu核数

vmstat：可以监控操作系统的进程状态、内存、虚拟内存、磁盘IO、cpu的信息

​               参数：-S：使用指定单位显示，k、K、m、M，分别代表1000、1024、1000000、1048576，默认单位为K

free：监控内存使用状态

mpstat：监控cpu，可以查看多核cpu中每个计算核心的统计数据

​                -P : 监控哪个cpu

​                internal：相邻的两次采样的间隔时间

​                count：采样的次数，只能和delay一起使用

netstat：用于显示网络连接、运行端口、路由表信息

​              参数：-n：拒绝显示别名，能显示数字的全部转换为数字

​                          -l：仅列出有在listen的服务状态

​                           -p：显示简历相关链接的程序名

​                           -t：显示tcp相关选项

​                          -u：显示udp相关选项

​                           -i：显示自动匹配接口的信息

​                      



​                  